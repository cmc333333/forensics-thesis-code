<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
<title>Ext2</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Ext2</h1>

<div class="code">
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Strings.Ascii.html#"><span class="id" type="library">Coq.Strings.Ascii</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Strings.String.html#"><span class="id" type="library">Coq.Strings.String</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.ZArith.ZArith.html#"><span class="id" type="library">Coq.ZArith.ZArith</span></a>.<br/>

<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Byte.html#"><span class="id" type="library">Byte</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="ByteData.html#"><span class="id" type="library">ByteData</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="DiskSubset.html#"><span class="id" type="library">DiskSubset</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Fetch.html#"><span class="id" type="library">Fetch</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="File.html#"><span class="id" type="library">File</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="StringOps.html#"><span class="id" type="library">StringOps</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Util.html#"><span class="id" type="library">Util</span></a>.<br/>

<br/>
<span class="id" type="keyword">Local</span>&nbsp;<span class="id" type="keyword">Open</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">N</span>.<br/>

<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="BA"><span class="id" type="definition">BA</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>.<br/>

<br/>
<span class="id" type="keyword">Structure</span> <a name="SuperBlock"><span class="id" type="record">SuperBlock</span></a> := <a name="mkSuperBlock"><span class="id" type="constructor">mkSuperBlock</span></a> {<br/>
&nbsp;&nbsp;<a name="inodesCount"><span class="id" type="projection">inodesCount</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="blocksCount"><span class="id" type="projection">blocksCount</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="rBlocksCount"><span class="id" type="projection">rBlocksCount</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="freeBlocksCount"><span class="id" type="projection">freeBlocksCount</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="freeInodesCount"><span class="id" type="projection">freeInodesCount</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="firstDataBlock"><span class="id" type="projection">firstDataBlock</span></a>: <a class="idref" href="Ext2.html#BA"><span class="id" type="definition">BA</span></a>;<br/>
&nbsp;&nbsp;<a name="logBlockSize"><span class="id" type="projection">logBlockSize</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="logFragSize"><span class="id" type="projection">logFragSize</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="blocksPerGroup"><span class="id" type="projection">blocksPerGroup</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="fragsPerGroup"><span class="id" type="projection">fragsPerGroup</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="inodesPerGroup"><span class="id" type="projection">inodesPerGroup</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="mTime"><span class="id" type="projection">mTime</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="wTime"><span class="id" type="projection">wTime</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="mntCount"><span class="id" type="projection">mntCount</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="maxMntCount"><span class="id" type="projection">maxMntCount</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="magic"><span class="id" type="projection">magic</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="state"><span class="id" type="projection">state</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="errors"><span class="id" type="projection">errors</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="minorRevLevel"><span class="id" type="projection">minorRevLevel</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="lastCheck"><span class="id" type="projection">lastCheck</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="checkinterval"><span class="id" type="projection">checkinterval</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="creatorOS"><span class="id" type="projection">creatorOS</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="revLevel"><span class="id" type="projection">revLevel</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="defResuid"><span class="id" type="projection">defResuid</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="defResgid"><span class="id" type="projection">defResgid</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<a name="firstIno"><span class="id" type="projection">firstIno</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="inodeSize"><span class="id" type="projection">inodeSize</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="blockGroupNr"><span class="id" type="projection">blockGroupNr</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="featureCompat"><span class="id" type="projection">featureCompat</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="featureIncompat"><span class="id" type="projection">featureIncompat</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="featureROCompat"><span class="id" type="projection">featureROCompat</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="uuid"><span class="id" type="projection">uuid</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="Byte.html#Byte"><span class="id" type="definition">Byte</span></a>;<br/>
&nbsp;&nbsp;<a name="volumeName"><span class="id" type="projection">volumeName</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Strings.String.html#string"><span class="id" type="inductive">string</span></a>;<br/>
&nbsp;&nbsp;<a name="lastMounted"><span class="id" type="projection">lastMounted</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Strings.String.html#string"><span class="id" type="inductive">string</span></a>;<br/>
&nbsp;&nbsp;<a name="algoBitmap"><span class="id" type="projection">algoBitmap</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<a name="preallocBlocks"><span class="id" type="projection">preallocBlocks</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="preallocDirBlocks"><span class="id" type="projection">preallocDirBlocks</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<a name="journalUUID"><span class="id" type="projection">journalUUID</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="journalInum"><span class="id" type="projection">journalInum</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="journalDev"><span class="id" type="projection">journalDev</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="lastOrphan"><span class="id" type="projection">lastOrphan</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<a name="hashSeed"><span class="id" type="projection">hashSeed</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="defHashVersion"><span class="id" type="projection">defHashVersion</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<a name="defaultMountOptions"><span class="id" type="projection">defaultMountOptions</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="firstMetaBg"><span class="id" type="projection">firstMetaBg</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a><br/>
}.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="findAndParseSuperBlock"><span class="id" type="definition">findAndParseSuperBlock</span></a> (<span class="id" type="var">disk</span>: <a class="idref" href="ByteData.html#Disk"><span class="id" type="definition">Disk</span></a>)<br/>
&nbsp;&nbsp;: @<a class="idref" href="Fetch.html#Fetch"><span class="id" type="inductive">Fetch</span></a> <a class="idref" href="Ext2.html#SuperBlock"><span class="id" type="record">SuperBlock</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">disk</span> := (<a class="idref" href="ByteData.html#shift"><span class="id" type="definition">shift</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 1024) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 0 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">inodesCount</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 4 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">blocksCount</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 8 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">rBlocksCount</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 12 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">freeBlocksCount</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 16 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">freeInodesCount</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 20 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">firstDataBlock</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 24 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">logBlockSize</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 28 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">logFragSize</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 32 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">blocksPerGroup</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 36 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">fragsPerGroup</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 40 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">inodesPerGroup</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 44 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">mTime</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 48 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">wTime</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 52 2<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">mntCount</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 54 2<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">maxMntCount</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 56 2<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">magic</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 58 2<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">state</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 60 2<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">errors</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 62 2<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">minorRevLevel</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 64 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">lastCheck</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 68 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">checkinterval</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 72 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">creatorOS</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 76 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">revLevel</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 80 2<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">defResuid</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 82 2<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">defResgid</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 84 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">firstIno</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 88 2<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">inodeSize</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 90 2<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">blockGroupNr</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 92 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">featureCompat</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 96 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">featureIncompat</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 100 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">featureROCompat</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_list"><span class="id" type="definition">seq_list</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 104 16<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">uuid</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_list"><span class="id" type="definition">seq_list</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 120 16<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">volumeName</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_list"><span class="id" type="definition">seq_list</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 136 64<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">lastMounted</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 200 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">algoBitmap</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 204<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">preallocBlocks</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 205<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">preallocDirBlocks</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 208 16<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">journalUUID</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 224 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">journalInum</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 228 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">journalDev</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 232 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">lastOrphan</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 236 16<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">hashSeed</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 252<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">defHashVersion</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 256 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">defaultMountOptions</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 260 4<a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">_fmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">firstMetaBg</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#mkSuperBlock"><span class="id" type="constructor">mkSuperBlock</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#inodesCount"><span class="id" type="variable">inodesCount</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#blocksCount"><span class="id" type="variable">blocksCount</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#rBlocksCount"><span class="id" type="variable">rBlocksCount</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#freeBlocksCount"><span class="id" type="variable">freeBlocksCount</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#freeInodesCount"><span class="id" type="variable">freeInodesCount</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#firstDataBlock"><span class="id" type="variable">firstDataBlock</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#logBlockSize"><span class="id" type="variable">logBlockSize</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#logFragSize"><span class="id" type="variable">logFragSize</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#blocksPerGroup"><span class="id" type="variable">blocksPerGroup</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#fragsPerGroup"><span class="id" type="variable">fragsPerGroup</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#inodesPerGroup"><span class="id" type="variable">inodesPerGroup</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#mTime"><span class="id" type="variable">mTime</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#wTime"><span class="id" type="variable">wTime</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#mntCount"><span class="id" type="variable">mntCount</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#maxMntCount"><span class="id" type="variable">maxMntCount</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#magic"><span class="id" type="variable">magic</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#state"><span class="id" type="variable">state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#errors"><span class="id" type="variable">errors</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#minorRevLevel"><span class="id" type="variable">minorRevLevel</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#lastCheck"><span class="id" type="variable">lastCheck</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#checkinterval"><span class="id" type="variable">checkinterval</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#creatorOS"><span class="id" type="variable">creatorOS</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#revLevel"><span class="id" type="variable">revLevel</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#defResuid"><span class="id" type="variable">defResuid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#defResgid"><span class="id" type="variable">defResgid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#firstIno"><span class="id" type="variable">firstIno</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#inodeSize"><span class="id" type="variable">inodeSize</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#blockGroupNr"><span class="id" type="variable">blockGroupNr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#featureCompat"><span class="id" type="variable">featureCompat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#featureIncompat"><span class="id" type="variable">featureIncompat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#featureROCompat"><span class="id" type="variable">featureROCompat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#uuid"><span class="id" type="variable">uuid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="StringOps.html#list2string"><span class="id" type="definition">list2string</span></a> <a class="idref" href="Ext2.html#volumeName"><span class="id" type="variable">volumeName</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="StringOps.html#list2string"><span class="id" type="definition">list2string</span></a> <a class="idref" href="Ext2.html#lastMounted"><span class="id" type="variable">lastMounted</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#algoBitmap"><span class="id" type="variable">algoBitmap</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Strings.Ascii.html#N_of_ascii"><span class="id" type="definition">N_of_ascii</span></a> <a class="idref" href="Ext2.html#preallocBlocks"><span class="id" type="variable">preallocBlocks</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Strings.Ascii.html#N_of_ascii"><span class="id" type="definition">N_of_ascii</span></a> <a class="idref" href="Ext2.html#preallocDirBlocks"><span class="id" type="variable">preallocDirBlocks</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#journalUUID"><span class="id" type="variable">journalUUID</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#journalInum"><span class="id" type="variable">journalInum</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#journalDev"><span class="id" type="variable">journalDev</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#lastOrphan"><span class="id" type="variable">lastOrphan</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#hashSeed"><span class="id" type="variable">hashSeed</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Strings.Ascii.html#N_of_ascii"><span class="id" type="definition">N_of_ascii</span></a> <a class="idref" href="Ext2.html#defHashVersion"><span class="id" type="variable">defHashVersion</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#defaultMountOptions"><span class="id" type="variable">defaultMountOptions</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#firstMetaBg"><span class="id" type="variable">firstMetaBg</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">)</span></a><a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">))))))))))))))))))))))))))))))))))))))))))))</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="findAndParseSuperBlock_subset"><span class="id" type="lemma">findAndParseSuperBlock_subset</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> (<span class="id" type="var">sub</span> <span class="id" type="var">super</span>:<a class="idref" href="ByteData.html#Disk"><span class="id" type="definition">Disk</span></a>) (<span class="id" type="var">superblock</span>: <a class="idref" href="Ext2.html#SuperBlock"><span class="id" type="record">SuperBlock</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#sub"><span class="id" type="variable">sub</span></a> <a class="idref" href="DiskSubset.html#::x_'⊆'_x"><span class="id" type="notation">⊆</span></a> <a class="idref" href="Ext2.html#super"><span class="id" type="variable">super</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#findAndParseSuperBlock"><span class="id" type="definition">findAndParseSuperBlock</span></a> <a class="idref" href="Ext2.html#sub"><span class="id" type="variable">sub</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#findAndParseSuperBlock"><span class="id" type="definition">findAndParseSuperBlock</span></a> <a class="idref" href="Ext2.html#super"><span class="id" type="variable">super</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">sub</span> <span class="id" type="var">super</span> <span class="id" type="var">superblock</span> <span class="id" type="var">subset</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Ext2.html#findAndParseSuperBlock"><span class="id" type="definition">findAndParseSuperBlock</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="DiskSubset.html#disk_subset"><span class="id" type="definition">disk_subset</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">subset</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">repeat</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="Fetch.html#found_fflatmap_found_twice"><span class="id" type="lemma">found_fflatmap_found_twice</span></a>; [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> ?;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">try</span> <span class="id" type="tactic">solve</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Util.html#seq_lendu_shift_subset"><span class="id" type="lemma">seq_lendu_shift_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" type="tactic">apply</span> <a class="idref" href="Util.html#seq_list_shift_subset"><span class="id" type="lemma">seq_list_shift_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" type="tactic">apply</span> <a class="idref" href="DiskSubset.html#subset_shift_found"><span class="id" type="lemma">subset_shift_found</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>) ] <br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="tactic">intro</span>; <span class="id" type="tactic">intro</span> ]).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="blockSize"><span class="id" type="definition">blockSize</span></a> (<span class="id" type="var">superblock</span>: <a class="idref" href="Ext2.html#SuperBlock"><span class="id" type="record">SuperBlock</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#N.shiftl"><span class="id" type="definition">N.shiftl</span></a> 1024 <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a>.(<a class="idref" href="Ext2.html#logBlockSize"><span class="id" type="projection">logBlockSize</span></a>).<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="ba2Offset"><span class="id" type="definition">ba2Offset</span></a> (<span class="id" type="var">superblock</span>: <a class="idref" href="Ext2.html#SuperBlock"><span class="id" type="record">SuperBlock</span></a>) (<span class="id" type="var">blockAddress</span>: <a class="idref" href="Ext2.html#BA"><span class="id" type="definition">BA</span></a>)<br/>
&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#blockSize"><span class="id" type="definition">blockSize</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="Ext2.html#blockAddress"><span class="id" type="variable">blockAddress</span></a>.<br/>

<br/>
<span class="id" type="keyword">Structure</span> <a name="GroupDescriptor"><span class="id" type="record">GroupDescriptor</span></a> := <a name="mkGroupDescriptor"><span class="id" type="constructor">mkGroupDescriptor</span></a> {<br/>
&nbsp;&nbsp;<a name="blockBitmap"><span class="id" type="projection">blockBitmap</span></a>: <a class="idref" href="Ext2.html#BA"><span class="id" type="definition">BA</span></a>;<br/>
&nbsp;&nbsp;<a name="inodeBitmap"><span class="id" type="projection">inodeBitmap</span></a>: <a class="idref" href="Ext2.html#BA"><span class="id" type="definition">BA</span></a>;<br/>
&nbsp;&nbsp;<a name="inodeTable"><span class="id" type="projection">inodeTable</span></a>: <a class="idref" href="Ext2.html#BA"><span class="id" type="definition">BA</span></a>;<br/>
&nbsp;&nbsp;<a name="gdFreeBlocksCount"><span class="id" type="projection">gdFreeBlocksCount</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="gdFreeInodesCount"><span class="id" type="projection">gdFreeInodesCount</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="usedDirsCount"><span class="id" type="projection">usedDirsCount</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a><br/>
}.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="findAndParseGroupDescriptor"><span class="id" type="definition">findAndParseGroupDescriptor</span></a> <br/>
&nbsp;&nbsp;(<span class="id" type="var">disk</span>: <a class="idref" href="ByteData.html#Disk"><span class="id" type="definition">Disk</span></a>) (<span class="id" type="var">superblock</span>: <a class="idref" href="Ext2.html#SuperBlock"><span class="id" type="record">SuperBlock</span></a>) (<span class="id" type="var">groupId</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>)<br/>
&nbsp;&nbsp;: @<a class="idref" href="Fetch.html#Fetch"><span class="id" type="inductive">Fetch</span></a> <a class="idref" href="Ext2.html#GroupDescriptor"><span class="id" type="record">GroupDescriptor</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">groupBlockArrayBA</span> := <span class="id" type="keyword">if</span> (1024 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'<?'_x"><span class="id" type="notation">&lt;?</span></a> <a class="idref" href="Ext2.html#blockSize"><span class="id" type="definition">blockSize</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">then</span> 1 <span class="id" type="keyword">else</span> 2 <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">groupBlockArrayOffset</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#ba2Offset"><span class="id" type="definition">ba2Offset</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a> <a class="idref" href="Ext2.html#groupBlockArrayBA"><span class="id" type="variable">groupBlockArrayBA</span></a> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">descriptorOffset</span> := 32 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="Ext2.html#groupId"><span class="id" type="variable">groupId</span></a> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">disk</span> := (<a class="idref" href="ByteData.html#shift"><span class="id" type="definition">shift</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> (<a class="idref" href="Ext2.html#groupBlockArrayOffset"><span class="id" type="variable">groupBlockArrayOffset</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="Ext2.html#descriptorOffset"><span class="id" type="variable">descriptorOffset</span></a>)) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 0 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">blockBitmap</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 4 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">inodeBitmap</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 8 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">inodeTable</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 12 2<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">gdFreeBlocksCount</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 14 2<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">gdFreeInodesCount</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 16 2<a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">_fmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">usedDirsCount</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#mkGroupDescriptor"><span class="id" type="constructor">mkGroupDescriptor</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#blockBitmap"><span class="id" type="variable">blockBitmap</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#inodeBitmap"><span class="id" type="variable">inodeBitmap</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#inodeTable"><span class="id" type="variable">inodeTable</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#gdFreeBlocksCount"><span class="id" type="variable">gdFreeBlocksCount</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#gdFreeInodesCount"><span class="id" type="variable">gdFreeInodesCount</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#usedDirsCount"><span class="id" type="variable">usedDirsCount</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">)</span></a><a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)))))</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="findAndParseGroupDescriptor_subset"><span class="id" type="lemma">findAndParseGroupDescriptor_subset</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> (<span class="id" type="var">sub</span> <span class="id" type="var">super</span>:<a class="idref" href="ByteData.html#Disk"><span class="id" type="definition">Disk</span></a>) (<span class="id" type="var">sb</span>: <a class="idref" href="Ext2.html#SuperBlock"><span class="id" type="record">SuperBlock</span></a>) (<span class="id" type="var">groupId</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="var">groupDesc</span>: <a class="idref" href="Ext2.html#GroupDescriptor"><span class="id" type="record">GroupDescriptor</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#sub"><span class="id" type="variable">sub</span></a> <a class="idref" href="DiskSubset.html#::x_'⊆'_x"><span class="id" type="notation">⊆</span></a> <a class="idref" href="Ext2.html#super"><span class="id" type="variable">super</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#findAndParseGroupDescriptor"><span class="id" type="definition">findAndParseGroupDescriptor</span></a> <a class="idref" href="Ext2.html#sub"><span class="id" type="variable">sub</span></a> <a class="idref" href="Ext2.html#sb"><span class="id" type="variable">sb</span></a> <a class="idref" href="Ext2.html#groupId"><span class="id" type="variable">groupId</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <a class="idref" href="Ext2.html#groupDesc"><span class="id" type="variable">groupDesc</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#findAndParseGroupDescriptor"><span class="id" type="definition">findAndParseGroupDescriptor</span></a> <a class="idref" href="Ext2.html#super"><span class="id" type="variable">super</span></a> <a class="idref" href="Ext2.html#sb"><span class="id" type="variable">sb</span></a> <a class="idref" href="Ext2.html#groupId"><span class="id" type="variable">groupId</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <a class="idref" href="Ext2.html#groupDesc"><span class="id" type="variable">groupDesc</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">sub</span> <span class="id" type="var">super</span> <span class="id" type="var">sb</span> <span class="id" type="var">groupId</span> <span class="id" type="var">groupDesc</span> <span class="id" type="var">subset</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Ext2.html#findAndParseGroupDescriptor"><span class="id" type="definition">findAndParseGroupDescriptor</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="DiskSubset.html#disk_subset"><span class="id" type="definition">disk_subset</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">subset</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">repeat</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="Fetch.html#found_fflatmap_found_twice"><span class="id" type="lemma">found_fflatmap_found_twice</span></a>; [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> ?;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">try</span> <span class="id" type="tactic">solve</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Util.html#seq_lendu_shift_subset"><span class="id" type="lemma">seq_lendu_shift_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" type="tactic">apply</span> <a class="idref" href="Util.html#seq_list_shift_subset"><span class="id" type="lemma">seq_list_shift_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" type="tactic">apply</span> <a class="idref" href="DiskSubset.html#subset_shift_found"><span class="id" type="lemma">subset_shift_found</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>) ] <br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="tactic">intro</span>; <span class="id" type="tactic">intro</span> ]).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Structure</span> <a name="Inode"><span class="id" type="record">Inode</span></a> := <a name="mkInode"><span class="id" type="constructor">mkInode</span></a> {<br/>
&nbsp;&nbsp;<a name="mode"><span class="id" type="projection">mode</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="uid"><span class="id" type="projection">uid</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="size"><span class="id" type="projection">size</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="atime"><span class="id" type="projection">atime</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="ctime"><span class="id" type="projection">ctime</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="mtime"><span class="id" type="projection">mtime</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="dtime"><span class="id" type="projection">dtime</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="gid"><span class="id" type="projection">gid</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="linksCount"><span class="id" type="projection">linksCount</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="blocks"><span class="id" type="projection">blocks</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="flags"><span class="id" type="projection">flags</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="osd1"><span class="id" type="projection">osd1</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="block"><span class="id" type="projection">block</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="Ext2.html#BA"><span class="id" type="definition">BA</span></a>;<br/>
&nbsp;&nbsp;<a name="generation"><span class="id" type="projection">generation</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="fileACL"><span class="id" type="projection">fileACL</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="dirACL"><span class="id" type="projection">dirACL</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="faddr"><span class="id" type="projection">faddr</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>;<br/>
&nbsp;&nbsp;<a name="osd2"><span class="id" type="projection">osd2</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a><br/>
}.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="findAndParseInode"><span class="id" type="definition">findAndParseInode</span></a> (<span class="id" type="var">disk</span>: <a class="idref" href="ByteData.html#Disk"><span class="id" type="definition">Disk</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" type="var">superblock</span>: <a class="idref" href="Ext2.html#SuperBlock"><span class="id" type="record">SuperBlock</span></a>) (<span class="id" type="var">groupdesc</span>: <a class="idref" href="Ext2.html#GroupDescriptor"><span class="id" type="record">GroupDescriptor</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" type="var">inodeIndex</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>): @<a class="idref" href="Fetch.html#Fetch"><span class="id" type="inductive">Fetch</span></a> <a class="idref" href="Ext2.html#Inode"><span class="id" type="record">Inode</span></a> :=<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" type="keyword">if</span> (<a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a>.(<a class="idref" href="Ext2.html#inodesCount"><span class="id" type="projection">inodesCount</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'<=?'_x"><span class="id" type="notation">&lt;=?</span></a> <a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">then</span> <a class="idref" href="Fetch.html#ErrorString"><span class="id" type="constructor">ErrorString</span></a> "Invalid inode index"<br/>
&nbsp;&nbsp;<span class="id" type="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">inodeIndexInTable</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'mod'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'mod'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'mod'_x"><span class="id" type="notation">mod</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a>.(<a class="idref" href="Ext2.html#inodesPerGroup"><span class="id" type="projection">inodesPerGroup</span></a>)) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">inodePos</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#ba2Offset"><span class="id" type="definition">ba2Offset</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#groupdesc"><span class="id" type="variable">groupdesc</span></a>.(<a class="idref" href="Ext2.html#inodeTable"><span class="id" type="projection">inodeTable</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#inodeIndexInTable"><span class="id" type="variable">inodeIndexInTable</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'*'_x"><span class="id" type="notation">*</span></a> 128<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">disk</span> := (<a class="idref" href="ByteData.html#shift"><span class="id" type="definition">shift</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> <a class="idref" href="Ext2.html#inodePos"><span class="id" type="variable">inodePos</span></a>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 0 2<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">mode</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 2 2<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">uid</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 4 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">size</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 8 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">atime</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 12 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">ctime</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 16 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">mtime</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 20 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">dtime</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 24 2<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">gid</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 26 2<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">linksCount</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 28 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">blocks</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 32 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">flags</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 36 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">osd1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 40 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">directBlock1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 44 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">directBlock2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 48 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">directBlock3</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 52 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">directBlock4</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 56 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">directBlock5</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 60 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">directBlock6</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 64 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">directBlock7</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 68 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">directBlock8</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 72 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">directBlock9</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 76 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">directBlock10</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 80 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">directBlock11</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 84 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">directBlock12</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 88 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">indirectBlock</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 92 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">doubleIndirectBlock</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 96 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">tripleIndirectBlock</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 100 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">generation</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 104 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">fileACL</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 108 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">dirACL</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 112 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">faddr</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> 116 4<a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">_fmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">osd2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#mkInode"><span class="id" type="constructor">mkInode</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#mode"><span class="id" type="variable">mode</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#uid"><span class="id" type="variable">uid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#size"><span class="id" type="variable">size</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#atime"><span class="id" type="variable">atime</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#ctime"><span class="id" type="variable">ctime</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#mtime"><span class="id" type="variable">mtime</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#dtime"><span class="id" type="variable">dtime</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#gid"><span class="id" type="variable">gid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#linksCount"><span class="id" type="variable">linksCount</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#blocks"><span class="id" type="variable">blocks</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#flags"><span class="id" type="variable">flags</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#osd1"><span class="id" type="variable">osd1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Ext2.html#directBlock1"><span class="id" type="variable">directBlock1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <a class="idref" href="Ext2.html#directBlock2"><span class="id" type="variable">directBlock2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <a class="idref" href="Ext2.html#directBlock3"><span class="id" type="variable">directBlock3</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <a class="idref" href="Ext2.html#directBlock4"><span class="id" type="variable">directBlock4</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <a class="idref" href="Ext2.html#directBlock5"><span class="id" type="variable">directBlock5</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <a class="idref" href="Ext2.html#directBlock6"><span class="id" type="variable">directBlock6</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <a class="idref" href="Ext2.html#directBlock7"><span class="id" type="variable">directBlock7</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <a class="idref" href="Ext2.html#directBlock8"><span class="id" type="variable">directBlock8</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <a class="idref" href="Ext2.html#directBlock9"><span class="id" type="variable">directBlock9</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <a class="idref" href="Ext2.html#directBlock10"><span class="id" type="variable">directBlock10</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <a class="idref" href="Ext2.html#directBlock11"><span class="id" type="variable">directBlock11</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <a class="idref" href="Ext2.html#directBlock12"><span class="id" type="variable">directBlock12</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <a class="idref" href="Ext2.html#indirectBlock"><span class="id" type="variable">indirectBlock</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <a class="idref" href="Ext2.html#doubleIndirectBlock"><span class="id" type="variable">doubleIndirectBlock</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <a class="idref" href="Ext2.html#tripleIndirectBlock"><span class="id" type="variable">tripleIndirectBlock</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:list_scope:x_'::'_x"><span class="id" type="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#generation"><span class="id" type="variable">generation</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#fileACL"><span class="id" type="variable">fileACL</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#dirACL"><span class="id" type="variable">dirACL</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#faddr"><span class="id" type="variable">faddr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#osd2"><span class="id" type="variable">osd2</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">)</span></a><a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)))))))))))))))))))))))))))))))</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="findAndParseInode_subset"><span class="id" type="lemma">findAndParseInode_subset</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> (<span class="id" type="var">sub</span> <span class="id" type="var">super</span>:<a class="idref" href="ByteData.html#Disk"><span class="id" type="definition">Disk</span></a>) (<span class="id" type="var">sb</span>: <a class="idref" href="Ext2.html#SuperBlock"><span class="id" type="record">SuperBlock</span></a>) (<span class="id" type="var">gd</span>: <a class="idref" href="Ext2.html#GroupDescriptor"><span class="id" type="record">GroupDescriptor</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="var">inodeIndex</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>) (<span class="id" type="var">inode</span>: <a class="idref" href="Ext2.html#Inode"><span class="id" type="record">Inode</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#sub"><span class="id" type="variable">sub</span></a> <a class="idref" href="DiskSubset.html#::x_'⊆'_x"><span class="id" type="notation">⊆</span></a> <a class="idref" href="Ext2.html#super"><span class="id" type="variable">super</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#findAndParseInode"><span class="id" type="definition">findAndParseInode</span></a> <a class="idref" href="Ext2.html#sub"><span class="id" type="variable">sub</span></a> <a class="idref" href="Ext2.html#sb"><span class="id" type="variable">sb</span></a> <a class="idref" href="Ext2.html#gd"><span class="id" type="variable">gd</span></a> <a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <a class="idref" href="Ext2.html#inode"><span class="id" type="variable">inode</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#findAndParseInode"><span class="id" type="definition">findAndParseInode</span></a> <a class="idref" href="Ext2.html#super"><span class="id" type="variable">super</span></a> <a class="idref" href="Ext2.html#sb"><span class="id" type="variable">sb</span></a> <a class="idref" href="Ext2.html#gd"><span class="id" type="variable">gd</span></a> <a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <a class="idref" href="Ext2.html#inode"><span class="id" type="variable">inode</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">sub</span> <span class="id" type="var">super</span> <span class="id" type="var">sb</span> <span class="id" type="var">gd</span> <span class="id" type="var">inodeIndex</span> <span class="id" type="var">inode</span> <span class="id" type="var">subset</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Ext2.html#findAndParseInode"><span class="id" type="definition">findAndParseInode</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="DiskSubset.html#disk_subset"><span class="id" type="definition">disk_subset</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">subset</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Ext2.html#inodesCount"><span class="id" type="projection">inodesCount</span></a> <span class="id" type="var">sb</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'<=?'_x"><span class="id" type="notation">&lt;=?</span></a> <span class="id" type="var">inodeIndex</span>); [ <span class="id" type="tactic">auto</span>|].<br/>
&nbsp;&nbsp;<span class="id" type="tactic">repeat</span> (<span class="id" type="tactic">apply</span> <a class="idref" href="Fetch.html#found_fflatmap_found_twice"><span class="id" type="lemma">found_fflatmap_found_twice</span></a>; [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> ?;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">try</span> <span class="id" type="tactic">solve</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Util.html#seq_lendu_shift_subset"><span class="id" type="lemma">seq_lendu_shift_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" type="tactic">apply</span> <a class="idref" href="Util.html#seq_list_shift_subset"><span class="id" type="lemma">seq_list_shift_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" type="tactic">apply</span> <a class="idref" href="DiskSubset.html#subset_shift_found"><span class="id" type="lemma">subset_shift_found</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>) ] <br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="tactic">intro</span>; <span class="id" type="tactic">intro</span> ]).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="walkIndirection"><span class="id" type="definition">walkIndirection</span></a> (<span class="id" type="var">disk</span>: <a class="idref" href="ByteData.html#Disk"><span class="id" type="definition">Disk</span></a>) (<span class="id" type="var">superblock</span>: <a class="idref" href="Ext2.html#SuperBlock"><span class="id" type="record">SuperBlock</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" type="var">blockNumber</span> <span class="id" type="var">indirectionPos</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>) (<span class="id" type="var">indirectionLevel</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) <br/>
&nbsp;&nbsp;: @<a class="idref" href="Fetch.html#Fetch"><span class="id" type="inductive">Fetch</span></a> <a class="idref" href="Ext2.html#BA"><span class="id" type="definition">BA</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Ext2.html#indirectionLevel"><span class="id" type="variable">indirectionLevel</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">bytePosition</span> := (<a class="idref" href="Ext2.html#indirectionPos"><span class="id" type="variable">indirectionPos</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">+</span></a> 4 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="Ext2.html#blockNumber"><span class="id" type="variable">blockNumber</span></a>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> <a class="idref" href="Ext2.html#bytePosition"><span class="id" type="variable">bytePosition</span></a> 4)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">nextIndirectionLevel</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">exponent</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#N.of_nat"><span class="id" type="definition">N.of_nat</span></a> <a class="idref" href="Ext2.html#indirectionLevel"><span class="id" type="variable">indirectionLevel</span></a> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">unitSizeInBlocks</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'^'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#blockSize"><span class="id" type="definition">blockSize</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'^'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'^'_x"><span class="id" type="notation">^</span></a> <a class="idref" href="Ext2.html#exponent"><span class="id" type="variable">exponent</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">(</span></a>4 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'^'_x"><span class="id" type="notation">^</span></a> <a class="idref" href="Ext2.html#exponent"><span class="id" type="variable">exponent</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">nextBlockIndex</span> := <a class="idref" href="Ext2.html#blockNumber"><span class="id" type="variable">blockNumber</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="Ext2.html#unitSizeInBlocks"><span class="id" type="variable">unitSizeInBlocks</span></a> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">nextBytePosition</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#indirectionPos"><span class="id" type="variable">indirectionPos</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">+</span></a> 4 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="Ext2.html#nextBlockIndex"><span class="id" type="variable">nextBlockIndex</span></a> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Util.html#seq_lendu"><span class="id" type="definition">seq_lendu</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> <a class="idref" href="Ext2.html#nextBytePosition"><span class="id" type="variable">nextBytePosition</span></a> 4<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">nextBlockBA</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#walkIndirection"><span class="id" type="definition">walkIndirection</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Ext2.html#blockNumber"><span class="id" type="variable">blockNumber</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'mod'_x"><span class="id" type="notation">mod</span></a> <a class="idref" href="Ext2.html#unitSizeInBlocks"><span class="id" type="variable">unitSizeInBlocks</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Ext2.html#ba2Offset"><span class="id" type="definition">ba2Offset</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a> <a class="idref" href="Ext2.html#nextBlockBA"><span class="id" type="variable">nextBlockBA</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">nextIndirectionLevel</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="walkIndirection_subset"><span class="id" type="lemma">walkIndirection_subset</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> (<span class="id" type="var">sub</span> <span class="id" type="var">super</span>:<a class="idref" href="ByteData.html#Disk"><span class="id" type="definition">Disk</span></a>) (<span class="id" type="var">sb</span>: <a class="idref" href="Ext2.html#SuperBlock"><span class="id" type="record">SuperBlock</span></a>) (<span class="id" type="var">blockNum</span> <span class="id" type="var">indPos</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="var">indLevel</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">ba</span>: <a class="idref" href="Ext2.html#BA"><span class="id" type="definition">BA</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#sub"><span class="id" type="variable">sub</span></a> <a class="idref" href="DiskSubset.html#::x_'⊆'_x"><span class="id" type="notation">⊆</span></a> <a class="idref" href="Ext2.html#super"><span class="id" type="variable">super</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#walkIndirection"><span class="id" type="definition">walkIndirection</span></a> <a class="idref" href="Ext2.html#sub"><span class="id" type="variable">sub</span></a> <a class="idref" href="Ext2.html#sb"><span class="id" type="variable">sb</span></a> <a class="idref" href="Ext2.html#blockNum"><span class="id" type="variable">blockNum</span></a> <a class="idref" href="Ext2.html#indPos"><span class="id" type="variable">indPos</span></a> <a class="idref" href="Ext2.html#indLevel"><span class="id" type="variable">indLevel</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <a class="idref" href="Ext2.html#ba"><span class="id" type="variable">ba</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#walkIndirection"><span class="id" type="definition">walkIndirection</span></a> <a class="idref" href="Ext2.html#super"><span class="id" type="variable">super</span></a> <a class="idref" href="Ext2.html#sb"><span class="id" type="variable">sb</span></a> <a class="idref" href="Ext2.html#blockNum"><span class="id" type="variable">blockNum</span></a> <a class="idref" href="Ext2.html#indPos"><span class="id" type="variable">indPos</span></a> <a class="idref" href="Ext2.html#indLevel"><span class="id" type="variable">indLevel</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <a class="idref" href="Ext2.html#ba"><span class="id" type="variable">ba</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">sub</span> <span class="id" type="var">super</span> <span class="id" type="var">sb</span> <span class="id" type="var">blockNum</span> <span class="id" type="var">indPos</span> <span class="id" type="var">indLevel</span> <span class="id" type="var">ba</span> <span class="id" type="var">subset</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="var">blockNum</span> <span class="id" type="var">indPos</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">blockNum</span> <span class="id" type="var">indPos</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">indLevel</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">blockNum</span> <span class="id" type="var">indPos</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Ext2.html#walkIndirection"><span class="id" type="definition">walkIndirection</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Util.html#seq_lendu_subset"><span class="id" type="lemma">seq_lendu_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">blockNum</span> <span class="id" type="var">indPos</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Ext2.html#walkIndirection"><span class="id" type="definition">walkIndirection</span></a>. <span class="id" type="tactic">fold</span> <a class="idref" href="Ext2.html#walkIndirection"><span class="id" type="definition">walkIndirection</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">subH</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Fetch.html#found_fflatmap_found"><span class="id" type="lemma">found_fflatmap_found</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">subH</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">subH</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">aval</span> [<span class="id" type="var">Haval</span> <span class="id" type="var">subH</span>]].<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Util.html#seq_lendu_subset"><span class="id" type="lemma">seq_lendu_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">Haval</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Haval</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Fetch.html#fetch_flatmap"><span class="id" type="definition">fetch_flatmap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHindLevel</span>. <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="fetchInodeByte"><span class="id" type="definition">fetchInodeByte</span></a> (<span class="id" type="var">disk</span>: <a class="idref" href="ByteData.html#Disk"><span class="id" type="definition">Disk</span></a>) (<span class="id" type="var">superblock</span>: <a class="idref" href="Ext2.html#SuperBlock"><span class="id" type="record">SuperBlock</span></a>) <br/>
&nbsp;&nbsp;(<span class="id" type="var">inode</span>: <a class="idref" href="Ext2.html#Inode"><span class="id" type="record">Inode</span></a>) (<span class="id" type="var">bytePos</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>): @<a class="idref" href="Fetch.html#Fetch"><span class="id" type="inductive">Fetch</span></a> <a class="idref" href="Byte.html#Byte"><span class="id" type="definition">Byte</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">if</span> <a class="idref" href="Ext2.html#inode"><span class="id" type="variable">inode</span></a>.(<a class="idref" href="Ext2.html#size"><span class="id" type="projection">size</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'<=?'_x"><span class="id" type="notation">&lt;=?</span></a> <a class="idref" href="Ext2.html#bytePos"><span class="id" type="variable">bytePos</span></a> <span class="id" type="keyword">then</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#MissingAt"><span class="id" type="constructor">MissingAt</span></a> <a class="idref" href="Ext2.html#bytePos"><span class="id" type="variable">bytePos</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">else</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">blockSize</span> := (<a class="idref" href="Ext2.html#blockSize"><span class="id" type="definition">blockSize</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">blockNumInFile</span> := <a class="idref" href="Ext2.html#bytePos"><span class="id" type="variable">bytePos</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="Ext2.html#blockSize"><span class="id" type="variable">blockSize</span></a> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">directAddressable</span> := 12 <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">indirect1Addressable</span> := <a class="idref" href="Ext2.html#blockSize"><span class="id" type="variable">blockSize</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">/</span></a> 4 <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">indirect2Addressable</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#blockSize"><span class="id" type="variable">blockSize</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="Ext2.html#blockSize"><span class="id" type="variable">blockSize</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">/</span></a> 16 <span class="id" type="keyword">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">if</span> <a class="idref" href="Ext2.html#blockNumInFile"><span class="id" type="variable">blockNumInFile</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'<=?'_x"><span class="id" type="notation">&lt;=?</span></a> <a class="idref" href="Ext2.html#directAddressable"><span class="id" type="variable">directAddressable</span></a> <span class="id" type="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Lists.List.html#nth_error"><span class="id" type="definition">nth_error</span></a> <a class="idref" href="Ext2.html#inode"><span class="id" type="variable">inode</span></a>.(<a class="idref" href="Ext2.html#block"><span class="id" type="projection">block</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#N.to_nat"><span class="id" type="definition">N.to_nat</span></a> <a class="idref" href="Ext2.html#blockNumInFile"><span class="id" type="variable">blockNumInFile</span></a>)) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Specif.html#error"><span class="id" type="definition">error</span></a> =&gt; <a class="idref" href="Fetch.html#ErrorString"><span class="id" type="constructor">ErrorString</span></a> "Data block not present"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Specif.html#value"><span class="id" type="definition">value</span></a> <span class="id" type="var">v</span> =&gt; <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <span class="id" type="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">else</span> <span class="id" type="keyword">if</span> <a class="idref" href="Ext2.html#blockNumInFile"><span class="id" type="variable">blockNumInFile</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'<=?'_x"><span class="id" type="notation">&lt;=?</span></a> <a class="idref" href="Ext2.html#directAddressable"><span class="id" type="variable">directAddressable</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="Ext2.html#indirect1Addressable"><span class="id" type="variable">indirect1Addressable</span></a> <span class="id" type="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Lists.List.html#nth_error"><span class="id" type="definition">nth_error</span></a> <a class="idref" href="Ext2.html#inode"><span class="id" type="variable">inode</span></a>.(<a class="idref" href="Ext2.html#block"><span class="id" type="projection">block</span></a>) 12) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Specif.html#error"><span class="id" type="definition">error</span></a> =&gt; <a class="idref" href="Fetch.html#ErrorString"><span class="id" type="constructor">ErrorString</span></a> "Indirection block not present"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Specif.html#value"><span class="id" type="definition">value</span></a> <span class="id" type="var">indirectBlock</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#walkIndirection"><span class="id" type="definition">walkIndirection</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Ext2.html#blockNumInFile"><span class="id" type="variable">blockNumInFile</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 12)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Ext2.html#ba2Offset"><span class="id" type="definition">ba2Offset</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a> <span class="id" type="var">indirectBlock</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">else</span> <span class="id" type="keyword">if</span> <a class="idref" href="Ext2.html#blockNumInFile"><span class="id" type="variable">blockNumInFile</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'<=?'_x"><span class="id" type="notation">&lt;=?</span></a> <a class="idref" href="Ext2.html#directAddressable"><span class="id" type="variable">directAddressable</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="Ext2.html#indirect1Addressable"><span class="id" type="variable">indirect1Addressable</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="Ext2.html#indirect2Addressable"><span class="id" type="variable">indirect2Addressable</span></a> <span class="id" type="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Lists.List.html#nth_error"><span class="id" type="definition">nth_error</span></a> <a class="idref" href="Ext2.html#inode"><span class="id" type="variable">inode</span></a>.(<a class="idref" href="Ext2.html#block"><span class="id" type="projection">block</span></a>) 13)  <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Specif.html#error"><span class="id" type="definition">error</span></a> =&gt; <a class="idref" href="Fetch.html#ErrorString"><span class="id" type="constructor">ErrorString</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Double indirection block not present"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Specif.html#value"><span class="id" type="definition">value</span></a> <span class="id" type="var">doubleIndirectBlock</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#walkIndirection"><span class="id" type="definition">walkIndirection</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Ext2.html#blockNumInFile"><span class="id" type="variable">blockNumInFile</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 12 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'-'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#blockSize"><span class="id" type="variable">blockSize</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">/</span></a> 4<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'-'_x"><span class="id" type="notation">)</span></a>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Ext2.html#ba2Offset"><span class="id" type="definition">ba2Offset</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a> <span class="id" type="var">doubleIndirectBlock</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">else</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Lists.List.html#nth_error"><span class="id" type="definition">nth_error</span></a> <a class="idref" href="Ext2.html#inode"><span class="id" type="variable">inode</span></a>.(<a class="idref" href="Ext2.html#block"><span class="id" type="projection">block</span></a>) 14) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Specif.html#error"><span class="id" type="definition">error</span></a> =&gt; <a class="idref" href="Fetch.html#ErrorString"><span class="id" type="constructor">ErrorString</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Triple indirection block not present"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Specif.html#value"><span class="id" type="definition">value</span></a> <span class="id" type="var">tripleIndirectBlock</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#walkIndirection"><span class="id" type="definition">walkIndirection</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Ext2.html#blockNumInFile"><span class="id" type="variable">blockNumInFile</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="Ext2.html#directAddressable"><span class="id" type="variable">directAddressable</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="Ext2.html#indirect1Addressable"><span class="id" type="variable">indirect1Addressable</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="Ext2.html#indirect2Addressable"><span class="id" type="variable">indirect2Addressable</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Ext2.html#ba2Offset"><span class="id" type="definition">ba2Offset</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a> <span class="id" type="var">tripleIndirectBlock</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">blockAddress</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> (<a class="idref" href="Ext2.html#blockSize"><span class="id" type="variable">blockSize</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="Ext2.html#blockAddress"><span class="id" type="variable">blockAddress</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#bytePos"><span class="id" type="variable">bytePos</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'mod'_x"><span class="id" type="notation">mod</span></a> <a class="idref" href="Ext2.html#blockSize"><span class="id" type="variable">blockSize</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fetchInodeByte_subset"><span class="id" type="lemma">fetchInodeByte_subset</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> (<span class="id" type="var">sub</span> <span class="id" type="var">super</span>:<a class="idref" href="ByteData.html#Disk"><span class="id" type="definition">Disk</span></a>) (<span class="id" type="var">sb</span>: <a class="idref" href="Ext2.html#SuperBlock"><span class="id" type="record">SuperBlock</span></a>) (<span class="id" type="var">inode</span>: <a class="idref" href="Ext2.html#Inode"><span class="id" type="record">Inode</span></a>) (<span class="id" type="var">bytePos</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="var">byte</span>: <a class="idref" href="Byte.html#Byte"><span class="id" type="definition">Byte</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#sub"><span class="id" type="variable">sub</span></a> <a class="idref" href="DiskSubset.html#::x_'⊆'_x"><span class="id" type="notation">⊆</span></a> <a class="idref" href="Ext2.html#super"><span class="id" type="variable">super</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#fetchInodeByte"><span class="id" type="definition">fetchInodeByte</span></a> <a class="idref" href="Ext2.html#sub"><span class="id" type="variable">sub</span></a> <a class="idref" href="Ext2.html#sb"><span class="id" type="variable">sb</span></a> <a class="idref" href="Ext2.html#inode"><span class="id" type="variable">inode</span></a> <a class="idref" href="Ext2.html#bytePos"><span class="id" type="variable">bytePos</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <a class="idref" href="Ext2.html#byte"><span class="id" type="variable">byte</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#fetchInodeByte"><span class="id" type="definition">fetchInodeByte</span></a> <a class="idref" href="Ext2.html#super"><span class="id" type="variable">super</span></a> <a class="idref" href="Ext2.html#sb"><span class="id" type="variable">sb</span></a> <a class="idref" href="Ext2.html#inode"><span class="id" type="variable">inode</span></a> <a class="idref" href="Ext2.html#bytePos"><span class="id" type="variable">bytePos</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <a class="idref" href="Ext2.html#byte"><span class="id" type="variable">byte</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">sub</span> <span class="id" type="var">super</span> <span class="id" type="var">sb</span> <span class="id" type="var">inode</span> <span class="id" type="var">bytePos</span> <span class="id" type="var">byte</span> <span class="id" type="var">subset</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Ext2.html#fetchInodeByte"><span class="id" type="definition">fetchInodeByte</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="Ext2.html#size"><span class="id" type="projection">size</span></a> <span class="id" type="var">inode</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'<=?'_x"><span class="id" type="notation">&lt;=?</span></a> <span class="id" type="var">bytePos</span>); [ <span class="id" type="tactic">auto</span> |].<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<span class="id" type="var">bytePos</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="Ext2.html#blockSize"><span class="id" type="definition">blockSize</span></a> <span class="id" type="var">sb</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'<=?'_x"><span class="id" type="notation">&lt;=?</span></a> 12).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Lists.List.html#nth_error"><span class="id" type="definition">nth_error</span></a> (<a class="idref" href="Ext2.html#block"><span class="id" type="projection">block</span></a> <span class="id" type="var">inode</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#N.to_nat"><span class="id" type="definition">N.to_nat</span></a> (<span class="id" type="var">bytePos</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="Ext2.html#blockSize"><span class="id" type="definition">blockSize</span></a> <span class="id" type="var">sb</span>)));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" type="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Fetch.html#fetch_flatmap"><span class="id" type="definition">fetch_flatmap</span></a>. <span class="id" type="tactic">apply</span> <span class="id" type="var">subset</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<span class="id" type="var">bytePos</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="Ext2.html#blockSize"><span class="id" type="definition">blockSize</span></a> <span class="id" type="var">sb</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'<=?'_x"><span class="id" type="notation">&lt;=?</span></a> 12 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="Ext2.html#blockSize"><span class="id" type="definition">blockSize</span></a> <span class="id" type="var">sb</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">/</span></a> 4).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Lists.List.html#nth_error"><span class="id" type="definition">nth_error</span></a> (<a class="idref" href="Ext2.html#block"><span class="id" type="projection">block</span></a> <span class="id" type="var">inode</span>) 12); [| <span class="id" type="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Fetch.html#found_fflatmap_found"><span class="id" type="lemma">found_fflatmap_found</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">aval</span> [<span class="id" type="var">Haval</span> <span class="id" type="var">H</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Ext2.html#walkIndirection_subset"><span class="id" type="lemma">walkIndirection_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">Haval</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Haval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Fetch.html#fetch_flatmap"><span class="id" type="definition">fetch_flatmap</span></a>. <span class="id" type="tactic">apply</span> <span class="id" type="var">subset</span>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<span class="id" type="var">bytePos</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="Ext2.html#blockSize"><span class="id" type="definition">blockSize</span></a> <span class="id" type="var">sb</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'<=?'_x"><span class="id" type="notation">&lt;=?</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="Ext2.html#blockSize"><span class="id" type="definition">blockSize</span></a> <span class="id" type="var">sb</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">/</span></a> 4 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="Ext2.html#blockSize"><span class="id" type="definition">blockSize</span></a> <span class="id" type="var">sb</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="Ext2.html#blockSize"><span class="id" type="definition">blockSize</span></a> <span class="id" type="var">sb</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">/</span></a> 16); [| <span class="id" type="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Lists.List.html#nth_error"><span class="id" type="definition">nth_error</span></a> (<a class="idref" href="Ext2.html#block"><span class="id" type="projection">block</span></a> <span class="id" type="var">inode</span>) 13); [| <span class="id" type="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Fetch.html#found_fflatmap_found"><span class="id" type="lemma">found_fflatmap_found</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">aval</span> [<span class="id" type="var">Haval</span> <span class="id" type="var">H</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Ext2.html#walkIndirection_subset"><span class="id" type="lemma">walkIndirection_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">Haval</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Haval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Fetch.html#fetch_flatmap"><span class="id" type="definition">fetch_flatmap</span></a>. <span class="id" type="tactic">apply</span> <span class="id" type="var">subset</span>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Lists.List.html#nth_error"><span class="id" type="definition">nth_error</span></a> (<a class="idref" href="Ext2.html#block"><span class="id" type="projection">block</span></a> <span class="id" type="var">inode</span>) 14); [| <span class="id" type="tactic">auto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Fetch.html#found_fflatmap_found"><span class="id" type="lemma">found_fflatmap_found</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">aval</span> [<span class="id" type="var">Haval</span> <span class="id" type="var">H</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Ext2.html#walkIndirection_subset"><span class="id" type="lemma">walkIndirection_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">Haval</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Haval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Fetch.html#fetch_flatmap"><span class="id" type="definition">fetch_flatmap</span></a>. <span class="id" type="tactic">apply</span> <span class="id" type="var">subset</span>. <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="parseDeleted"><span class="id" type="definition">parseDeleted</span></a> (<span class="id" type="var">disk</span>: <a class="idref" href="ByteData.html#Disk"><span class="id" type="definition">Disk</span></a>) (<span class="id" type="var">superblock</span>: <a class="idref" href="Ext2.html#SuperBlock"><span class="id" type="record">SuperBlock</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" type="var">groupdesc</span>: <a class="idref" href="Ext2.html#GroupDescriptor"><span class="id" type="record">GroupDescriptor</span></a>) (<span class="id" type="var">inodeIndex</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>) : @<a class="idref" href="Fetch.html#Fetch"><span class="id" type="inductive">Fetch</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" type="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">inodeIndexInGroup</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'mod'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'mod'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'mod'_x"><span class="id" type="notation">mod</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a>.(<a class="idref" href="Ext2.html#inodesPerGroup"><span class="id" type="projection">inodesPerGroup</span></a>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">bitmapStart</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#ba2Offset"><span class="id" type="definition">ba2Offset</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a> <a class="idref" href="Ext2.html#groupdesc"><span class="id" type="variable">groupdesc</span></a>.(<a class="idref" href="Ext2.html#inodeBitmap"><span class="id" type="projection">inodeBitmap</span></a>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> (<a class="idref" href="Ext2.html#bitmapStart"><span class="id" type="variable">bitmapStart</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#inodeIndexInGroup"><span class="id" type="variable">inodeIndexInGroup</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">/</span></a> 8<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'+'_x"><span class="id" type="notation">)</span></a>)<a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">)</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">_fmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">allocationByte</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#allocationByte"><span class="id" type="variable">allocationByte</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">,</span></a> <a class="idref" href="Ext2.html#inodeIndexInGroup"><span class="id" type="variable">inodeIndexInGroup</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'mod'_x"><span class="id" type="notation">mod</span></a> 8<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Strings.Ascii.html#Ascii"><span class="id" type="constructor">Ascii</span></a> <span class="id" type="var">b</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">,</span></a> 0<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#negb"><span class="id" type="definition">negb</span></a> <span class="id" type="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Strings.Ascii.html#Ascii"><span class="id" type="constructor">Ascii</span></a> <span class="id" type="var">_</span> <span class="id" type="var">b</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">,</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#negb"><span class="id" type="definition">negb</span></a> <span class="id" type="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Strings.Ascii.html#Ascii"><span class="id" type="constructor">Ascii</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">b</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">,</span></a> 2<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#negb"><span class="id" type="definition">negb</span></a> <span class="id" type="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Strings.Ascii.html#Ascii"><span class="id" type="constructor">Ascii</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">b</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">,</span></a> 3<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#negb"><span class="id" type="definition">negb</span></a> <span class="id" type="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Strings.Ascii.html#Ascii"><span class="id" type="constructor">Ascii</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">b</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">,</span></a> 4<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#negb"><span class="id" type="definition">negb</span></a> <span class="id" type="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Strings.Ascii.html#Ascii"><span class="id" type="constructor">Ascii</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">b</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">,</span></a> 5<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#negb"><span class="id" type="definition">negb</span></a> <span class="id" type="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Strings.Ascii.html#Ascii"><span class="id" type="constructor">Ascii</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">b</span> <span class="id" type="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">,</span></a> 6<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#negb"><span class="id" type="definition">negb</span></a> <span class="id" type="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Strings.Ascii.html#Ascii"><span class="id" type="constructor">Ascii</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">,</span></a> 7<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#:core_scope:'('_x_','_x_','_'..'_','_x_')'"><span class="id" type="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#negb"><span class="id" type="definition">negb</span></a> <span class="id" type="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#false"><span class="id" type="constructor">false</span></a>  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">)</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="parseDeleted_subset"><span class="id" type="lemma">parseDeleted_subset</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> (<span class="id" type="var">sub</span> <span class="id" type="var">super</span>:<a class="idref" href="ByteData.html#Disk"><span class="id" type="definition">Disk</span></a>) (<span class="id" type="var">sb</span>: <a class="idref" href="Ext2.html#SuperBlock"><span class="id" type="record">SuperBlock</span></a>) (<span class="id" type="var">gd</span>: <a class="idref" href="Ext2.html#GroupDescriptor"><span class="id" type="record">GroupDescriptor</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="var">inodeIndex</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>) (<span class="id" type="var">val</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" type="inductive">bool</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#sub"><span class="id" type="variable">sub</span></a> <a class="idref" href="DiskSubset.html#::x_'⊆'_x"><span class="id" type="notation">⊆</span></a> <a class="idref" href="Ext2.html#super"><span class="id" type="variable">super</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#parseDeleted"><span class="id" type="definition">parseDeleted</span></a> <a class="idref" href="Ext2.html#sub"><span class="id" type="variable">sub</span></a> <a class="idref" href="Ext2.html#sb"><span class="id" type="variable">sb</span></a> <a class="idref" href="Ext2.html#gd"><span class="id" type="variable">gd</span></a> <a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <a class="idref" href="Ext2.html#val"><span class="id" type="variable">val</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#parseDeleted"><span class="id" type="definition">parseDeleted</span></a> <a class="idref" href="Ext2.html#super"><span class="id" type="variable">super</span></a> <a class="idref" href="Ext2.html#sb"><span class="id" type="variable">sb</span></a> <a class="idref" href="Ext2.html#gd"><span class="id" type="variable">gd</span></a> <a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <a class="idref" href="Ext2.html#val"><span class="id" type="variable">val</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">sub</span> <span class="id" type="var">super</span> <span class="id" type="var">sb</span> <span class="id" type="var">gd</span> <span class="id" type="var">inodeIndex</span> <span class="id" type="var">val</span> <span class="id" type="var">subset</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Ext2.html#parseDeleted"><span class="id" type="definition">parseDeleted</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Fetch.html#found_fmap_found"><span class="id" type="lemma">found_fmap_found</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">aval</span> [<span class="id" type="var">Haval</span> <span class="id" type="var">H</span>]].<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">subset</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Haval</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Haval</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Fetch.html#fetch_map"><span class="id" type="definition">fetch_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="fileByte"><span class="id" type="definition">fileByte</span></a> (<span class="id" type="var">disk</span>: <a class="idref" href="ByteData.html#Disk"><span class="id" type="definition">Disk</span></a>) (<span class="id" type="var">inodeIndex</span> <span class="id" type="var">offset</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>)<br/>
&nbsp;&nbsp;: @<a class="idref" href="Fetch.html#Fetch"><span class="id" type="inductive">Fetch</span></a> <a class="idref" href="Byte.html#Byte"><span class="id" type="definition">Byte</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#findAndParseSuperBlock"><span class="id" type="definition">findAndParseSuperBlock</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a><a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">superblock</span> =&gt;<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">groupId</span> := (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a>.(<a class="idref" href="Ext2.html#inodesPerGroup"><span class="id" type="projection">inodesPerGroup</span></a>)) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">inodeIndexInGroup</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'mod'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'mod'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'mod'_x"><span class="id" type="notation">mod</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a>.(<a class="idref" href="Ext2.html#inodesPerGroup"><span class="id" type="projection">inodesPerGroup</span></a>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#findAndParseGroupDescriptor"><span class="id" type="definition">findAndParseGroupDescriptor</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a> <a class="idref" href="Ext2.html#groupId"><span class="id" type="variable">groupId</span></a><a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">groupdesc</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#findAndParseInode"><span class="id" type="definition">findAndParseInode</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a> <a class="idref" href="Ext2.html#groupdesc"><span class="id" type="variable">groupdesc</span></a> <a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a><a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">inode</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#fetchInodeByte"><span class="id" type="definition">fetchInodeByte</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a> <a class="idref" href="Ext2.html#inode"><span class="id" type="variable">inode</span></a> <a class="idref" href="Ext2.html#offset"><span class="id" type="variable">offset</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)))</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fileByte_subset"><span class="id" type="lemma">fileByte_subset</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> (<span class="id" type="var">sub</span> <span class="id" type="var">super</span>:<a class="idref" href="ByteData.html#Disk"><span class="id" type="definition">Disk</span></a>) (<span class="id" type="var">inodeIndex</span> <span class="id" type="var">offset</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>) (<span class="id" type="var">val</span>: <a class="idref" href="Byte.html#Byte"><span class="id" type="definition">Byte</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#sub"><span class="id" type="variable">sub</span></a> <a class="idref" href="DiskSubset.html#::x_'⊆'_x"><span class="id" type="notation">⊆</span></a> <a class="idref" href="Ext2.html#super"><span class="id" type="variable">super</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#fileByte"><span class="id" type="definition">fileByte</span></a> <a class="idref" href="Ext2.html#sub"><span class="id" type="variable">sub</span></a> <a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a> <a class="idref" href="Ext2.html#offset"><span class="id" type="variable">offset</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <a class="idref" href="Ext2.html#val"><span class="id" type="variable">val</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#fileByte"><span class="id" type="definition">fileByte</span></a> <a class="idref" href="Ext2.html#super"><span class="id" type="variable">super</span></a> <a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a> <a class="idref" href="Ext2.html#offset"><span class="id" type="variable">offset</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <a class="idref" href="Ext2.html#val"><span class="id" type="variable">val</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">sub</span> <span class="id" type="var">super</span> <span class="id" type="var">inodeIndex</span> <span class="id" type="var">offset</span> <span class="id" type="var">val</span> <span class="id" type="var">subset</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Ext2.html#fileByte"><span class="id" type="definition">fileByte</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Fetch.html#found_fflatmap_found"><span class="id" type="lemma">found_fflatmap_found</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">sb</span> [<span class="id" type="var">Hsb</span> <span class="id" type="var">H</span>]].<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Fetch.html#found_fflatmap_found"><span class="id" type="lemma">found_fflatmap_found</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">gd</span> [<span class="id" type="var">Hgd</span> <span class="id" type="var">H</span>]].<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Fetch.html#found_fflatmap_found"><span class="id" type="lemma">found_fflatmap_found</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">inode</span> [<span class="id" type="var">Hinode</span> <span class="id" type="var">H</span>]].<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Ext2.html#findAndParseSuperBlock_subset"><span class="id" type="lemma">findAndParseSuperBlock_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">Hsb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Hsb</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Fetch.html#fetch_flatmap"><span class="id" type="definition">fetch_flatmap</span></a> <span class="id" type="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Ext2.html#findAndParseGroupDescriptor_subset"><span class="id" type="lemma">findAndParseGroupDescriptor_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">Hgd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Hgd</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Fetch.html#fetch_flatmap"><span class="id" type="definition">fetch_flatmap</span></a> <span class="id" type="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Ext2.html#findAndParseInode_subset"><span class="id" type="lemma">findAndParseInode_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">Hinode</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Hinode</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Fetch.html#fetch_flatmap"><span class="id" type="definition">fetch_flatmap</span></a> <span class="id" type="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Ext2.html#fetchInodeByte_subset"><span class="id" type="lemma">fetchInodeByte_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="findAndParseFile"><span class="id" type="definition">findAndParseFile</span></a> (<span class="id" type="var">disk</span>: <a class="idref" href="ByteData.html#Disk"><span class="id" type="definition">Disk</span></a>) (<span class="id" type="var">inodeIndex</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>) <br/>
&nbsp;&nbsp;: @<a class="idref" href="Fetch.html#Fetch"><span class="id" type="inductive">Fetch</span></a> <a class="idref" href="File.html#File"><span class="id" type="record">File</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#findAndParseSuperBlock"><span class="id" type="definition">findAndParseSuperBlock</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a><a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">superblock</span> =&gt;<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">groupId</span> := (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a>.(<a class="idref" href="Ext2.html#inodesPerGroup"><span class="id" type="projection">inodesPerGroup</span></a>)) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">inodeIndexInGroup</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'mod'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'mod'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.NArith.BinNat.html#:N_scope:x_'mod'_x"><span class="id" type="notation">mod</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a>.(<a class="idref" href="Ext2.html#inodesPerGroup"><span class="id" type="projection">inodesPerGroup</span></a>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#findAndParseGroupDescriptor"><span class="id" type="definition">findAndParseGroupDescriptor</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a> <a class="idref" href="Ext2.html#groupId"><span class="id" type="variable">groupId</span></a><a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">groupdesc</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#findAndParseInode"><span class="id" type="definition">findAndParseInode</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a> <a class="idref" href="Ext2.html#groupdesc"><span class="id" type="variable">groupdesc</span></a> <a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a><a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">_fflatmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">inode</span> =&gt;<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Ext2.html#parseDeleted"><span class="id" type="definition">parseDeleted</span></a> <a class="idref" href="Ext2.html#disk"><span class="id" type="variable">disk</span></a> <a class="idref" href="Ext2.html#superblock"><span class="id" type="variable">superblock</span></a> <a class="idref" href="Ext2.html#groupdesc"><span class="id" type="variable">groupdesc</span></a> <a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a><a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">_fmap_</span></a> <a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">fun</span> <span class="id" type="var">deleted</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="File.html#mkFile"><span class="id" type="constructor">mkFile</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="FileIds.html#Ext2Id"><span class="id" type="constructor">FileIds.Ext2Id</span></a> <a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#inode"><span class="id" type="variable">inode</span></a>.(<a class="idref" href="Ext2.html#size"><span class="id" type="projection">size</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#deleted"><span class="id" type="variable">deleted</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Specif.html#value"><span class="id" type="definition">value</span></a> <a class="idref" href="Ext2.html#inode"><span class="id" type="variable">inode</span></a>.(<a class="idref" href="Ext2.html#atime"><span class="id" type="projection">atime</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Specif.html#value"><span class="id" type="definition">value</span></a> <a class="idref" href="Ext2.html#inode"><span class="id" type="variable">inode</span></a>.(<a class="idref" href="Ext2.html#mtime"><span class="id" type="projection">mtime</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Specif.html#value"><span class="id" type="definition">value</span></a> <a class="idref" href="Ext2.html#inode"><span class="id" type="variable">inode</span></a>.(<a class="idref" href="Ext2.html#ctime"><span class="id" type="projection">ctime</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Specif.html#value"><span class="id" type="definition">value</span></a> <a class="idref" href="Ext2.html#inode"><span class="id" type="variable">inode</span></a>.(<a class="idref" href="Ext2.html#dtime"><span class="id" type="projection">dtime</span></a>))<br/>
&nbsp;&nbsp;<a class="idref" href="Fetch.html#::x_'_fmap_'_x"><span class="id" type="notation">)</span></a><a class="idref" href="Fetch.html#::x_'_fflatmap_'_x"><span class="id" type="notation">)))</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="findAndParseFile_subset"><span class="id" type="lemma">findAndParseFile_subset</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> (<span class="id" type="var">sub</span> <span class="id" type="var">super</span>:<a class="idref" href="ByteData.html#Disk"><span class="id" type="definition">Disk</span></a>) (<span class="id" type="var">inodeIndex</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Numbers.BinNums.html#N"><span class="id" type="inductive">N</span></a>) (<span class="id" type="var">val</span>: <a class="idref" href="File.html#File"><span class="id" type="record">File</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#sub"><span class="id" type="variable">sub</span></a> <a class="idref" href="DiskSubset.html#::x_'⊆'_x"><span class="id" type="notation">⊆</span></a> <a class="idref" href="Ext2.html#super"><span class="id" type="variable">super</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#findAndParseFile"><span class="id" type="definition">findAndParseFile</span></a> <a class="idref" href="Ext2.html#sub"><span class="id" type="variable">sub</span></a> <a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <a class="idref" href="Ext2.html#val"><span class="id" type="variable">val</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Ext2.html#findAndParseFile"><span class="id" type="definition">findAndParseFile</span></a> <a class="idref" href="Ext2.html#super"><span class="id" type="variable">super</span></a> <a class="idref" href="Ext2.html#inodeIndex"><span class="id" type="variable">inodeIndex</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Fetch.html#Found"><span class="id" type="constructor">Found</span></a> <a class="idref" href="Ext2.html#val"><span class="id" type="variable">val</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">sub</span> <span class="id" type="var">super</span> <span class="id" type="var">inodeIndex</span> <span class="id" type="var">val</span> <span class="id" type="var">subset</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="Ext2.html#findAndParseFile"><span class="id" type="definition">findAndParseFile</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Fetch.html#found_fflatmap_found"><span class="id" type="lemma">found_fflatmap_found</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">sb</span> [<span class="id" type="var">Hsb</span> <span class="id" type="var">H</span>]].<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Fetch.html#found_fflatmap_found"><span class="id" type="lemma">found_fflatmap_found</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">gd</span> [<span class="id" type="var">Hgd</span> <span class="id" type="var">H</span>]].<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Fetch.html#found_fflatmap_found"><span class="id" type="lemma">found_fflatmap_found</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">inode</span> [<span class="id" type="var">Hinode</span> <span class="id" type="var">H</span>]].<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Fetch.html#found_fmap_found"><span class="id" type="lemma">found_fmap_found</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">deleted</span> [<span class="id" type="var">Hdeleted</span> <span class="id" type="var">H</span>]].<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Ext2.html#findAndParseSuperBlock_subset"><span class="id" type="lemma">findAndParseSuperBlock_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">Hsb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Hsb</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Fetch.html#fetch_flatmap"><span class="id" type="definition">fetch_flatmap</span></a> <span class="id" type="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Ext2.html#findAndParseGroupDescriptor_subset"><span class="id" type="lemma">findAndParseGroupDescriptor_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">Hgd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Hgd</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Fetch.html#fetch_flatmap"><span class="id" type="definition">fetch_flatmap</span></a> <span class="id" type="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Ext2.html#findAndParseInode_subset"><span class="id" type="lemma">findAndParseInode_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">Hinode</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Hinode</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Fetch.html#fetch_flatmap"><span class="id" type="definition">fetch_flatmap</span></a> <span class="id" type="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Ext2.html#parseDeleted_subset"><span class="id" type="lemma">parseDeleted_subset</span></a> <span class="id" type="keyword">with</span> (1:=<span class="id" type="var">subset</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">Hdeleted</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Hdeleted</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Fetch.html#fetch_map"><span class="id" type="definition">fetch_map</span></a> <span class="id" type="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>